<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FRAS Dashboard</title>

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

<style>
:root{
  --bg-primary:#0a0a0f;
  --bg-secondary:#12121a;
  --bg-card:#1a1a28;
  --accent-primary:#6366f1;
  --accent-secondary:#8b5cf6;
  --accent-tertiary:#ec4899;
  --text-primary:#f8fafc;
  --text-secondary:#94a3b8;
  --text-muted:#64748b;
  --border:#1e293b;
  --success:#10b981;
  --warning:#f59e0b;
  --error:#ef4444;
  --glass:rgba(255,255,255,0.03);
  --glass-hover:rgba(255,255,255,0.06);
}

*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Inter',system-ui,-apple-system,sans-serif;
  background:var(--bg-primary);
  color:var(--text-primary);
  height:100vh;
  overflow:hidden;
  position:relative;
}

body::before{
  content:'';
  position:fixed;
  top:-50%;
  right:-50%;
  width:200%;
  height:200%;
  background:radial-gradient(circle at 30% 50%,rgba(99,102,241,0.15),transparent 40%),
             radial-gradient(circle at 70% 50%,rgba(139,92,246,0.1),transparent 40%);
  animation:rotateGradient 20s linear infinite;
  pointer-events:none;
  z-index:0;
}

@keyframes rotateGradient{
  to{transform:rotate(360deg)}
}

.container{
  display:flex;
  height:100vh;
  position:relative;
  z-index:1;
}

/* Sidebar */
aside{
  width:280px;
  background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(139,92,246,0.05));
  backdrop-filter:blur(20px);
  border-right:1px solid var(--border);
  padding:24px;
  display:flex;
  flex-direction:column;
  gap:20px;
  transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);
}

.profile{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  padding:20px;
  background:var(--glass);
  border-radius:16px;
  border:1px solid var(--border);
  position:relative;
  overflow:hidden;
}

.profile::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:60px;
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
  opacity:0.2;
  z-index:0;
}

.profile img{
  width:80px;
  height:80px;
  border-radius:50%;
  border:3px solid var(--accent-primary);
  object-fit:cover;
  position:relative;
  z-index:1;
  transition:transform 0.3s ease,box-shadow 0.3s ease;
}

.profile:hover img{
  transform:scale(1.05);
  box-shadow:0 8px 30px rgba(99,102,241,0.4);
}

.profile h3{
  font-size:1.1rem;
  font-weight:600;
  position:relative;
  z-index:1;
}

.profile p{
  font-size:0.85rem;
  color:var(--text-secondary);
  position:relative;
  z-index:1;
}

nav{
  display:flex;
  flex-direction:column;
  gap:6px;
  flex:1;
}

nav a{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 16px;
  border-radius:12px;
  color:var(--text-secondary);
  text-decoration:none;
  background:transparent;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  font-weight:500;
  font-size:0.95rem;
  position:relative;
  overflow:hidden;
}

nav a::before{
  content:'';
  position:absolute;
  left:0;
  top:0;
  height:100%;
  width:3px;
  background:linear-gradient(180deg,var(--accent-primary),var(--accent-secondary));
  transform:scaleY(0);
  transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);
}

nav a:hover{
  background:var(--glass-hover);
  color:var(--text-primary);
  transform:translateX(4px);
}

nav a:hover::before{
  transform:scaleY(1);
}

.export-section{
  padding:16px;
  background:var(--bg-card);
  border-radius:12px;
  border:1px solid var(--border);
}

.export-section label{
  font-weight:600;
  font-size:0.9rem;
  display:block;
  margin-bottom:12px;
  color:var(--text-primary);
}

.export-controls{
  display:flex;
  flex-direction:column;
  gap:8px;
}

/* Main Content */
main{
  flex:1;
  padding:24px;
  overflow:auto;
  scrollbar-width:thin;
  scrollbar-color:var(--accent-primary) var(--bg-secondary);
}

main::-webkit-scrollbar{width:8px}
main::-webkit-scrollbar-track{background:var(--bg-secondary)}
main::-webkit-scrollbar-thumb{background:var(--accent-primary);border-radius:4px}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px 24px;
  border-radius:16px;
  background:var(--glass);
  backdrop-filter:blur(10px);
  border:1px solid var(--border);
  margin-bottom:24px;
  animation:slideDown 0.5s cubic-bezier(0.4,0,0.2,1);
}

@keyframes slideDown{
  from{opacity:0;transform:translateY(-20px)}
  to{opacity:1;transform:translateY(0)}
}

header h2{
  font-size:1.8rem;
  font-weight:700;
  background:linear-gradient(135deg,var(--text-primary),var(--text-secondary));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

.controls{
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
}

input[type="text"],input[type="email"],input:not([type="hidden"]),select{
  padding:10px 16px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--glass);
  color:var(--text-primary);
  font-family:inherit;
  font-size:0.95rem;
  transition:all 0.3s ease;
  outline:none;
}

input:focus,select:focus{
  border-color:var(--accent-primary);
  background:var(--glass-hover);
  box-shadow:0 0 0 3px rgba(99,102,241,0.1);
}

input::placeholder{color:var(--text-muted)}

.small{
  color:var(--text-muted);
  font-size:0.85rem;
}

/* Grid & Cards */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:20px;
  animation:fadeInUp 0.6s cubic-bezier(0.4,0,0.2,1);
}

@keyframes fadeInUp{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

.card{
  background:var(--bg-card);
  padding:24px;
  border-radius:16px;
  border:1px solid var(--border);
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  overflow:hidden;
}

.card::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:1px;
  background:linear-gradient(90deg,transparent,var(--accent-primary),transparent);
  opacity:0;
  transition:opacity 0.3s ease;
}

.card:hover{
  border-color:var(--accent-primary);
  transform:translateY(-4px);
  box-shadow:0 20px 40px rgba(0,0,0,0.3);
}

.card:hover::before{opacity:1}

.card h3{
  font-size:1.3rem;
  font-weight:600;
  margin-bottom:8px;
  color:var(--text-primary);
}

.stat-card{
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.stat-value{
  font-size:2.5rem;
  font-weight:700;
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-tertiary));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

/* Tables */
.table-wrap{
  overflow:auto;
  max-height:400px;
  border-radius:12px;
  border:1px solid var(--border);
  margin-top:16px;
}

table{
  width:100%;
  border-collapse:collapse;
  color:var(--text-primary);
}

thead{
  background:var(--glass);
  position:sticky;
  top:0;
  z-index:10;
  backdrop-filter:blur(10px);
}

th{
  padding:14px 12px;
  text-align:left;
  font-weight:600;
  font-size:0.9rem;
  text-transform:uppercase;
  letter-spacing:0.5px;
  color:var(--text-secondary);
  border-bottom:2px solid var(--border);
}

td{
  padding:14px 12px;
  border-bottom:1px solid var(--border);
  color:var(--text-primary);
}

tbody tr{
  transition:background 0.2s ease;
}

tbody tr:hover{
  background:var(--glass);
}

.empty{
  color:var(--text-muted);
  padding:24px;
  text-align:center;
  font-style:italic;
}

/* Buttons */
.btn{
  padding:10px 20px;
  border-radius:10px;
  border:none;
  font-weight:500;
  font-size:0.95rem;
  cursor:pointer;
  transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
  font-family:inherit;
  position:relative;
  overflow:hidden;
  z-index:1;
}

.btn::before{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:0;
  height:0;
  border-radius:50%;
  background:rgba(255,255,255,0.2);
  transform:translate(-50%,-50%);
  transition:width 0.6s,height 0.6s;
  z-index:-1;
}

.btn:hover::before{
  width:300px;
  height:300px;
}

.btn:not(.ghost){
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
  color:white;
  box-shadow:0 4px 15px rgba(99,102,241,0.3);
}

.btn:not(.ghost):hover{
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(99,102,241,0.4);
}

.btn.ghost{
  background:transparent;
  border:1px solid var(--border);
  color:var(--text-primary);
}

.btn.ghost:hover{
  border-color:var(--accent-primary);
  background:var(--glass-hover);
}

.btn:active{
  transform:scale(0.98);
}

/* Forms */
form{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  margin-top:16px;
}

/* Responsive */
@media(max-width:1200px){
  .grid{grid-template-columns:repeat(2,1fr)}
}

@media(max-width:768px){
  aside{
    position:fixed;
    left:0;
    top:0;
    bottom:0;
    transform:translateX(-100%);
    z-index:1000;
    box-shadow:2px 0 20px rgba(0,0,0,0.5);
  }
  aside.active{transform:translateX(0)}
  .grid{grid-template-columns:1fr}
  header{flex-direction:column;gap:12px;align-items:flex-start}
}

/* Page transitions */
.page{
  animation:fadeIn 0.4s ease;
}

@keyframes fadeIn{
  from{opacity:0}
  to{opacity:1}
}

/* Chart containers */
canvas{
  max-height:220px;
  margin-top:12px;
}
</style>
</head>
<body>
<div class="container">
  <aside>
    <div class="profile">
      <img src="https://i.pravatar.cc/150?img=12" alt="profile">
      <h3 id="userName">John Doe</h3>
      <p id="userRole">Administrator</p>
    </div>
    <nav>
      <a href="#" data-target="overview">üìä Dashboard</a>
      <a href="#" data-target="teachers">üë®‚Äçüè´ Teachers</a>
      <a href="#" data-target="students">üéì Students</a>
      <a href="#" data-target="attendance">üìã Attendance</a>
      <a href="#" data-target="reports">üìà Reports</a>
    </nav>
    <div class="export-section">
      <label>üì• Export Data</label>
      <div class="export-controls">
        <button class="btn ghost" onclick="exportTeachersCSV()">Teachers CSV</button>
        <button class="btn ghost" onclick="exportStudentsCSV()">Students CSV</button>
        <button class="btn ghost" onclick="exportAttendanceCSV()">Attendance CSV</button>
        <button class="btn" onclick="exportTeachersXLS()">Teachers XLSX</button>
        <button class="btn" onclick="exportStudentsXLS()">Students XLSX</button>
        <button class="btn" onclick="exportAttendanceXLS()">Attendance XLSX</button>
      </div>
    </div>
  </aside>

  <main>
    <header>
      <h2 id="pageTitle">Dashboard</h2>
      <div class="controls">
        <input id="search" placeholder="üîç Search..." style="min-width:200px">
        <span class="small">üíæ Data stored locally</span>
      </div>
    </header>

    <section id="overview" class="page">
      <div class="grid">
        <div class="card stat-card">
          <div>
            <h3>Teachers</h3>
            <p class="small">Total registered</p>
          </div>
          <div class="stat-value" id="statTeachers">0</div>
        </div>
        <div class="card stat-card">
          <div>
            <h3>Students</h3>
            <p class="small">Total enrolled</p>
          </div>
          <div class="stat-value" id="statStudents">0</div>
        </div>
        <div class="card stat-card">
          <div>
            <h3>Attendance</h3>
            <p class="small">Total entries</p>
          </div>
          <div class="stat-value" id="statAttendance">0</div>
        </div>
        <div class="card">
          <h3>Performance Trend</h3>
          <canvas id="perfChart"></canvas>
        </div>
        <div class="card">
          <h3>Weekly Attendance</h3>
          <canvas id="attChart"></canvas>
        </div>
      </div>
    </section>

    <section id="teachers" class="page" style="display:none">
      <div class="card">
        <h3>Manage Teachers</h3>
        <p class="small">Add, edit, or remove teacher records</p>
        <form id="teacherForm" onsubmit="return addOrUpdateTeacher(event)">
          <input type="hidden" id="teacherId">
          <input id="teacherName" placeholder="Full name" required>
          <input id="teacherEmail" type="email" placeholder="Email" required>
          <input id="teacherSubject" placeholder="Subject" required>
          <button class="btn" type="submit">üíæ Save</button>
          <button class="btn ghost" type="button" onclick="resetTeacherForm()">‚úñ Cancel</button>
        </form>

        <div class="table-wrap">
          <table id="teachersTable">
            <thead><tr><th>#</th><th>Name</th><th>Email</th><th>Subject</th><th>Actions</th></tr></thead>
            <tbody></tbody>
          </table>
          <div id="teachersEmpty" class="empty">No teachers added yet</div>
        </div>
      </div>
    </section>

    <section id="students" class="page" style="display:none">
      <div class="card">
        <h3>Manage Students</h3>
        <p class="small">Add, edit, or remove student records</p>
        <form id="studentForm" onsubmit="return addOrUpdateStudent(event)">
          <input type="hidden" id="studentId">
          <input id="studentName" placeholder="Full name" required>
          <input id="studentEmail" type="email" placeholder="Email" required>
          <input id="studentCourse" placeholder="Course" required>
          <button class="btn" type="submit">üíæ Save</button>
          <button class="btn ghost" type="button" onclick="resetStudentForm()">‚úñ Cancel</button>
        </form>

        <div class="table-wrap">
          <table id="studentsTable">
            <thead><tr><th>#</th><th>Name</th><th>Email</th><th>Course</th><th>Actions</th></tr></thead>
            <tbody></tbody>
          </table>
          <div id="studentsEmpty" class="empty">No students added yet</div>
        </div>
      </div>
    </section>

    <section id="attendance" class="page" style="display:none">
      <div class="card">
        <h3>Mark Attendance</h3>
        <p class="small">Record student attendance</p>
        <form id="attendanceForm" onsubmit="return markAttendance(event)">
          <select id="attStudentSelect" required style="min-width:200px"></select>
          <select id="attStatus" required>
            <option value="Present">‚úÖ Present</option>
            <option value="Absent">‚ùå Absent</option>
          </select>
          <button class="btn" type="submit">‚úì Mark</button>
          <button class="btn ghost" type="button" onclick="clearAttendance()">üóë Clear All</button>
        </form>

        <div class="table-wrap">
          <table id="attendanceTable">
            <thead><tr><th>#</th><th>Student</th><th>Status</th><th>Time</th><th>Action</th></tr></thead>
            <tbody></tbody>
          </table>
          <div id="attendanceEmpty" class="empty">No attendance records yet</div>
        </div>
      </div>
    </section>

    <section id="reports" class="page" style="display:none">
      <div class="grid">
        <div class="card">
          <h3>Summary Report</h3>
          <p class="small">Current system statistics</p>
          <div style="margin-top:20px;display:flex;flex-direction:column;gap:12px">
            <div style="display:flex;justify-content:space-between;padding:12px;background:var(--glass);border-radius:8px">
              <span>Total Teachers:</span>
              <strong id="reportTeachers" style="color:var(--accent-primary)">0</strong>
            </div>
            <div style="display:flex;justify-content:space-between;padding:12px;background:var(--glass);border-radius:8px">
              <span>Total Students:</span>
              <strong id="reportStudents" style="color:var(--accent-secondary)">0</strong>
            </div>
            <div style="display:flex;justify-content:space-between;padding:12px;background:var(--glass);border-radius:8px">
              <span>Attendance Entries:</span>
              <strong id="reportAttendance" style="color:var(--accent-tertiary)">0</strong>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>
</div>

<script>
const KEY='fras_v3';
function load(){const r=localStorage.getItem(KEY);if(!r){const i={teachers:[],students:[],attendance:[]};localStorage.setItem(KEY,JSON.stringify(i));return i}return JSON.parse(r)}
function save(s){localStorage.setItem(KEY,JSON.stringify(s))}
function uid(p='id'){return p+'_'+Math.random().toString(36).slice(2,9)}
function now(){return new Date().toLocaleString()}

let state=load();

const pages=['overview','teachers','students','attendance','reports'];
document.querySelectorAll('nav a[data-target]').forEach(a=>a.addEventListener('click',e=>{e.preventDefault();show(a.dataset.target)}));

function show(p){
  pages.forEach(pg=>document.getElementById(pg).style.display=(pg===p?'':'none'));
  document.getElementById('pageTitle').textContent=p.charAt(0).toUpperCase()+p.slice(1);
  if(p==='overview')renderOverview();
  if(p==='teachers')renderTeachers();
  if(p==='students')renderStudents();
  if(p==='attendance')renderAttendance();
  if(p==='reports')renderReports();
  window.scrollTo({top:0,behavior:'smooth'});
}
show('overview');

let perfChart=null,attChart=null;
function renderOverview(){
  document.getElementById('statTeachers').textContent=state.teachers.length;
  document.getElementById('statStudents').textContent=state.students.length;
  document.getElementById('statAttendance').textContent=state.attendance.length;
  
  const perfCtx=document.getElementById('perfChart').getContext('2d');
  if(perfChart)perfChart.destroy();
  perfChart=new Chart(perfCtx,{
    type:'line',
    data:{
      labels:['Jan','Feb','Mar','Apr','May','Jun'],
      datasets:[{
        data:[300,290,280,350,380,420],
        borderColor:'#6366f1',
        backgroundColor:'rgba(99,102,241,0.1)',
        tension:0.4,
        fill:true
      }]
    },
    options:{
      plugins:{legend:{display:false}},
      scales:{y:{grid:{color:'rgba(255,255,255,0.05)'}},x:{grid:{color:'rgba(255,255,255,0.05)'}}}
    }
  });
  
  const attCtx=document.getElementById('attChart').getContext('2d');
  if(attChart)attChart.destroy();
  attChart=new Chart(attCtx,{
    type:'bar',
    data:{
      labels:['Mon','Tue','Wed','Thu','Fri','Sat'],
      datasets:[{
        data:[85,90,88,86,91,89],
        backgroundColor:'rgba(139,92,246,0.8)',
        borderRadius:8
      }]
    },
    options:{
      plugins:{legend:{display:false}},
      scales:{y:{beginAtZero:true,grid:{color:'rgba(255,255,255,0.05)'}},x:{grid:{display:false}}}
    }
  });
}

function renderTeachers(){
  const tbody=document.querySelector('#teachersTable tbody');tbody.innerHTML='';
  if(state.teachers.length===0){
    document.getElementById('teachersEmpty').style.display='block';
    document.getElementById('teachersTable').style.display='none';
    return;
  }
  document.getElementById('teachersEmpty').style.display='none';
  document.getElementById('teachersTable').style.display='table';
  state.teachers.forEach((t,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${i+1}</td><td>${t.name}</td><td>${t.email}</td><td>${t.subject}</td>
      <td><button class="btn ghost" onclick='editTeacher("${t.id}")'>‚úèÔ∏è Edit</button> 
      <button class="btn ghost" onclick='delTeacher("${t.id}")'>üóëÔ∏è Delete</button></td>`;
    tbody.appendChild(tr);
  });
}

function addOrUpdateTeacher(e){
  e.preventDefault();
  const id=document.getElementById('teacherId').value;
  const name=document.getElementById('teacherName').value.trim();
  const email=document.getElementById('teacherEmail').value.trim();
  const subject=document.getElementById('teacherSubject').value.trim();
  if(!name||!email||!subject)return alert('Please fill all fields');
  if(id){
    const idx=state.teachers.findIndex(x=>x.id===id);
    if(idx>-1)state.teachers[idx]={id,name,email,subject};
  }else{
    state.teachers.push({id:uid('t'),name,email,subject});
  }
  save(state);renderTeachers();resetTeacherForm();renderOverview();
  return false;
}

function resetTeacherForm(){
  document.getElementById('teacherId').value='';
  document.getElementById('teacherName').value='';
  document.getElementById('teacherEmail').value='';
  document.getElementById('teacherSubject').value='';
}

function editTeacher(id){
  const t=state.teachers.find(x=>x.id===id);
  if(!t)return;
  document.getElementById('teacherId').value=t.id;
  document.getElementById('teacherName').value=t.name;
  document.getElementById('teacherEmail').value=t.email;
  document.getElementById('teacherSubject').value=t.subject;
  show('teachers');
}

function delTeacher(id){
  if(!confirm('Delete this teacher?'))return;
  state.teachers=state.teachers.filter(x=>x.id!==id);
  save(state);renderTeachers();renderOverview();
}

function renderStudents(){
  const tbody=document.querySelector('#studentsTable tbody');tbody.innerHTML='';
  if(state.students.length===0){
    document.getElementById('studentsEmpty').style.display='block';
    document.getElementById('studentsTable').style.display='none';
    return;
  }
  document.getElementById('studentsEmpty').style.display='none';
  document.getElementById('studentsTable').style.display='table';
  state.students.forEach((s,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${i+1}</td><td>${s.name}</td><td>${s.email}</td><td>${s.course}</td>
      <td><button class="btn ghost" onclick='editStudent("${s.id}")'>‚úèÔ∏è Edit</button> 
      <button class="btn ghost" onclick='delStudent("${s.id}")'>üóëÔ∏è Delete</button></td>`;
    tbody.appendChild(tr);
  });
  populateStudentSelect();
}

function addOrUpdateStudent(e){
  e.preventDefault();
  const id=document.getElementById('studentId').value;
  const name=document.getElementById('studentName').value.trim();
  const email=document.getElementById('studentEmail').value.trim();
  const course=document.getElementById('studentCourse').value.trim();
  if(!name||!email||!course)return alert('Please fill all fields');
  if(id){
    const idx=state.students.findIndex(x=>x.id===id);
    if(idx>-1)state.students[idx]={id,name,email,course};
  }else{
    state.students.push({id:uid('s'),name,email,course});
  }
  save(state);renderStudents();resetStudentForm();renderOverview();
  return false;
}

function resetStudentForm(){
  document.getElementById('studentId').value='';
  document.getElementById('studentName').value='';
  document.getElementById('studentEmail').value='';
  document.getElementById('studentCourse').value='';
}

function editStudent(id){
  const s=state.students.find(x=>x.id===id);
  if(!s)return;
  document.getElementById('studentId').value=s.id;
  document.getElementById('studentName').value=s.name;
  document.getElementById('studentEmail').value=s.email;
  document.getElementById('studentCourse').value=s.course;
  show('students');
}

function delStudent(id){
  if(!confirm('Delete this student?'))return;
  state.students=state.students.filter(x=>x.id!==id);