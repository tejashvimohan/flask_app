<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>FRAS Dashboard</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />
    <link rel="stylesheet" href="../static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="../static/JS/script.js"></script>

</head>

<body>
    <div class="container">
        <aside>
            <div class="profile">
                <img src="https://i.pravatar.cc/150?img=12" alt="profile">
                <h3 id="userName">Tejashvi Mohan</h3>
                <p id="userRole">Administrator</p>
            </div>
            <nav>
                <a href="#" data-target="overview">ğŸ“Š Overview</a>
                <a href="#" data-target="teachers">ğŸ‘¨â€ğŸ« Teachers</a>
                <a href="#" data-target="students">ğŸ“ Students</a>
                <a href="#" data-target="attendance">ğŸ“‹ Attendance</a>
                <a href="#" data-target="reports">ğŸ“ˆ Reports</a>
            </nav>
            <div class="logout">
                <a href="login.html">Logout</a>
            </div>
            <div class="export-section">
                <label>ğŸ“¥ Export Data</label>
                <div class="export-controls">
                    <button class="btn" onclick="exportTeachersXLS()">Teachers Data</button>
                    <button class="btn" onclick="exportStudentsXLS()">Students Data</button>
                    <button class="btn" onclick="exportAttendanceXLS()">Attendance Data</button>
                </div>
            </div>
        </aside>

        <main>
            <header>
                <h2 id="pageTitle">Admin Dashboard</h2>
                <div class="controls">
                    <input id="search" placeholder="ğŸ” Search..." style="min-width:200px">
                    <span class="small">ğŸ’¾ Request</span>
                </div>
            </header>

            <section id="overview" class="page">
                <div class="grid">
                    <div class="card stat-card">
                        <div>
                            <h3>Teachers</h3>
                            <p class="small">Total registered</p>
                        </div>
                        <div class="stat-value" id="statTeachers">0</div>
                    </div>
                    <div class="card stat-card">
                        <div>
                            <h3>Students</h3>
                            <p class="small">Total enrolled</p>
                        </div>
                        <div class="stat-value" id="statStudents">0</div>
                    </div>
                    <div class="card stat-card">
                        <div>
                            <h3>Attendance</h3>
                            <p class="small">Total entries</p>
                        </div>
                        <div class="stat-value" id="statAttendance">0</div>
                    </div>
                    <div class="card">
                        <h3>Performance Trend</h3>
                        <canvas id="perfChart"></canvas>
                    </div>
                    <div class="card">
                        <h3>Weekly Attendance</h3>
                        <canvas id="attChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="teachers" class="page" style="display:none">
                <div class="card">
                    <h3>Manage Teachers</h3>
                    <p class="small">Add, edit, or remove teacher records</p>
                    <form id="teacherForm" onsubmit="return addOrUpdateTeacher(event)">
                        <input type="hidden" id="teacherId">
                        <input id="teacherName" placeholder="Full name" required>
                        <input id="teacherEmail" type="email" placeholder="Email" required>
                        <input id="teacherSubject" placeholder="Subject" required>
                        <button class="btn" type="submit">ğŸ’¾ Save</button>
                        <button class="btn ghost" type="button" onclick="resetTeacherForm()">âœ– Cancel</button>
                    </form>

                    <div class="table-wrap">
                        {% if teachers %}
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for teacher in teachers %}
                                <tr>
                                    <td>{{ teacher.id }}</td>
                                    <td>{{ teacher.name }}</td>
                                    <td>{{ teacher.email }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        {% else %}
                        <p style="text-align: center;">No teacher records found in the database.</p>
                        {% endif %}
                        <div id="teachersEmpty" class="empty">No teachers added yet</div>
                    </div>
                </div>
            </section>

            <section id="students" class="page" style="display:none">
                <div class="card">
                    <h3>Manage Students</h3>
                    <p class="small">Add, edit, or remove student records</p>
                    <form id="studentForm" onsubmit="return addOrUpdateStudent(event)">
                        <input type="hidden" id="studentId">
                        <input id="studentName" placeholder="Full name" required>
                        <input id="studentEmail" type="email" placeholder="Email" required>
                        <input id="studentCourse" placeholder="Course" required>
                        <button class="btn" type="submit">ğŸ’¾ Save</button>
                        <button class="btn ghost" type="button" onclick="resetStudentForm()">âœ– Cancel</button>
                    </form>

                    <div class="table-wrap">
                        <table id="studentsTable">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Course</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div id="studentsEmpty" class="empty">No students added yet</div>
                    </div>
                </div>
            </section>

            <section id="attendance" class="page" style="display:none">
                <div class="card">
                    <h3>Mark Attendance</h3>
                    <p class="small">Record student attendance</p>
                    <form id="attendanceForm" onsubmit="return markAttendance(event)">
                        <select id="attStudentSelect" required style="min-width:200px"></select>
                        <select id="attStatus" required>
                            <option value="Present">âœ… Present</option>
                            <option value="Absent">âŒ Absent</option>
                        </select>
                        <button class="btn" type="submit">âœ“ Mark</button>
                        <button class="btn ghost" type="button" onclick="clearAttendance()">ğŸ—‘ Clear All</button>
                    </form>

                    <div class="table-wrap">
                        <table id="attendanceTable">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Student</th>
                                    <th>Status</th>
                                    <th>Time</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div id="attendanceEmpty" class="empty">No attendance records yet</div>
                    </div>
                </div>
            </section>

            <section id="reports" class="page" style="display:none">
                <div class="grid">
                    <div class="card">
                        <h3>Summary Report</h3>
                        <p class="small">Current system statistics</p>
                        <div style="margin-top:20px;display:flex;flex-direction:column;gap:12px">
                            <div
                                style="display:flex;justify-content:space-between;padding:12px;background:var(--glass);border-radius:8px">
                                <span>Total Teachers:</span>
                                <strong id="reportTeachers" style="color:var(--accent-primary)">0</strong>
                            </div>
                            <div
                                style="display:flex;justify-content:space-between;padding:12px;background:var(--glass);border-radius:8px">
                                <span>Total Students:</span>
                                <strong id="reportStudents" style="color:var(--accent-secondary)">0</strong>
                            </div>
                            <div
                                style="display:flex;justify-content:space-between;padding:12px;background:var(--glass);border-radius:8px">
                                <span>Attendance Entries:</span>
                                <strong id="reportAttendance" style="color:var(--accent-tertiary)">0</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

  
</body>

</html>